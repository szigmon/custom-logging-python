# Custom Logging with Python

A robust Python logging library leveraging the default `logging` library to provide enhanced logging capabilities. This library includes custom JSON formatting and enrichment, ensuring detailed and structured log data for better observability and debugging. Ideal for applications requiring comprehensive and customizable logging solutions.

## Features

- Custom JSON formatter for logs
- Custom log enrichment with request ID, method, caller, line, thread, relative time, and sequence number
- Custom `TRACE` log level
- Alias from `warning` to `warn`

## Environment Variables

To configure the logging library, set the following environment variables:

- `ENVIRONMENT`: The environment in which the application is running (e.g., `dev` or `prod`). Default is `dev`.
    - `dev` environment enables more verbosity, including `DEBUG` and `TRACE` levels.
    - `prod` environment sets the logging level to `INFO`.
- `SERVICE_NAME`: The name of the application (e.g., `app1`). Default is `None`.
- `TENANT_ID`: The name of the owner (e.g., `Bazel Team`). Default is `None`.

## Log Schema

The custom logs generated by this library follow the schema below:

- `timestamp`: The timestamp of the log event in ISO 8601 format.
- `level`: The log level (e.g., `TRACE`, `DEBUG`, `INFO`, `WARN`, `ERROR`, `CRITICAL`).
- `tenantId`: The tenant ID, derived from the environment variable `TENANT_ID`.
- `requestId`: A unique identifier for the request.
- `service`: The name of the service, derived from the environment variable `SERVICE_NAME`.
- `env`: The environment (e.g., `dev`, `prod`).
- `caller`: The file path of the caller.
- `method`: The method name from which the log event originated.
- `line`: The line number in the source code where the log event was generated.
- `thread`: The name of the thread that generated the log event.
- `rel`: The number of milliseconds elapsed since the start of the application until the creation of the log event.
- `seq`: An increment sequence number for every log event.
- `message`: The log message.

## Example Log Output

```json
{
    "timestamp": "2024-07-25T15:30:00.123Z",
    "level": "INFO",
    "tenantId": "Bazel Team",
    "requestId": "123e4567-e89b-12d3-a456-426614174000",
    "service": "app1",
    "env": "prod",
    "caller": "/path/to/file.py",
    "method": "function_name",
    "line": 42,
    "thread": "MainThread",
    "rel": 1500,
    "seq": 10,
    "message": "This is a test log message"
}
